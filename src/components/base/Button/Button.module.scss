@use "../../../styles/utilities/functions" as *;
@use "../../../styles/mixins/mixins-typo" as *;
@use "../../../styles/utilities/mediaqueries" as *;
@use "../../../styles/utilities/utilities" as *;

// TODO
// - Define disabled style
// - Define forced color styles for all variants and modes
// - Define focus styles for all variants and modes

.button {
  @include button-text;

  --button-background-color: none;
  --button-border-color: currentcolor;
  --button-color: var(--interaction-primary);
  --button-icon-size: var(--spacing-m);
  --button-padding-block: 20;
  --button-padding-inline: var(--spacing-l);

  display: flex;
  align-items: center;
  column-gap: px-to-rem(var(--spacing-m));
  padding-block: px-to-rem(var(--button-padding-block));
  padding-inline: px-to-rem(var(--button-padding-inline));
  background: var(--button-background-color);
  border: px-to-rem(var(--border-width-m)) solid var(--button-border-color);
  color: var(--button-color);
  text-align: left;

  &:is(a) {
    display: inline-flex;
    text-decoration: none;
  }

  &[disabled] {
    opacity: 0.5;
  }

  .iconStart,
  .iconEnd {
    flex: 0 0 px-to-rem(var(--button-icon-size));
    width: px-to-rem(var(--button-icon-size));
    height: px-to-rem(var(--button-icon-size));

    svg {
      stroke: var(--button-icon-color);
    }
  }
}

/**
  * Filled variant
  */
.buttonFilled {
  @include font-smoothing-reset;

  --button-background-color: var(--interaction-primary);
  --button-border-color: var(--interaction-primary);
  --button-color: var(--text-primary-inverted);
  --button-icon-color: var(--icon-secondary-inverted);

  &:is(:hover, :focus) {
    --button-background-color: var(--interaction-primary-hover);
  }
}

.buttonFilled.dark {
  @include font-smoothing;

  --button-background-color: var(--interaction-primary-inverted);
  --button-border-color: var(--interaction-primary-inverted);
  --button-color: var(--interaction-primary);
  --button-icon-color: var(--icon-secondary);

  &:is(:hover, :focus) {
    --button-background-color: var(--interaction-primary-inverted-hover);
    --button-border-color: var(--interaction-primary-inverted-hover);
  }
}

/**
  * Outlined variant
  */
.buttonOutlined {
  --button-background-color: none;
  --button-icon-color: var(--icon-primary);

  &:is(:hover, :focus) {
    --button-border-color: var(--interaction-primary-hover);
    --button-color: var(--interaction-primary-hover);
    --button-icon-color: var(--interaction-primary-hover);
  }
}

.buttonOutlined.dark {
  --button-border-color: currentcolor;
  --button-color: var(--interaction-primary-inverted);
  --button-icon-color: currentcolor;

  &:is(:hover, :focus) {
    --button-color: var(--interaction-primary-inverted-hover);
  }
}

/**
  * Text only variant
  */
.buttonText {
  @include reduced-motion {
    --line-animation-duration: 0s;
  }

  & {
    --button-icon-color: var(--interaction-secondary);
    --line-animation-duration: var(--motion-speed-very-fast);
    --line-cover-color: canvas;

    // Redefined because we want to use the --button-padding-block
    // variable on the innerText element.
    padding-block: 0;
    border: none;
  }

  &:is(:hover, :focus) {
    --button-icon-color: var(--interaction-secondary-hover);
  }

  &:is(:hover, :focus) .innerText:before {
    transform: translateX(100%);
    transition-timing-function: var(--motion-ease-in);
    z-index: 2;
  }

  &:is(:hover, :focus) .innerText .line {
    transform: translateX(-100%);
    transition-duration: 0s;
  }

  &:is(:hover, :focus) .innerText:after {
    opacity: 1;
  }

  &.dark {
    --button-color: var(--text-primary-inverted);
    --button-icon-color: var(--interaction-primary-inverted);
    --line-cover-color: var(--interaction-primary);
  }

  .innerText {
    position: relative;
    overflow: hidden;
    display: inline-block;
    padding-block: px-to-rem(var(--button-padding-block));

    .line,
    &:before,
    &:after {
      position: absolute;
      content: "";
      width: 100%;
      height: px-to-rem(var(--border-width-l));
      inset-inline: 0;
      inset-block-end: px-to-rem(var(--spacing-2xs));
      background: currentcolor;
      transform: translateX(0);
      transition:
        transform var(--line-animation-duration)
        var(--motion-ease-out);
      pointer-events: none;
    }

    .line {
      background: var(--line-cover-color);
      z-index: 2;
    }

    &:after {
      z-index: 1;
    }

    &:before {
      background: var(--line-cover-color);
    }
  }

  &[aria-current] {
    .innerText:before,
    .innerText .line {
      display: none;
    }
  }
}

/**
  * Play button only variant
  */
.buttonPlay {
  --button-play-size: 60;
  --button-icon-size: 38;
  --button-icon-color: var(--icon-primary-inverted);

  display: flex;
  justify-content: center;
  width: px-to-rem(var(--button-play-size));
  height: px-to-rem(var(--button-play-size));
  padding: 0;
  column-gap: unset;
  align-content: center;
  border: px-to-rem(var(--border-width-l)) solid var(--icon-primary-inverted);
  border-radius: 60%;
  transition: transform var(--motion-speed-fast) var(--motion-ease-in);
  cursor: pointer;

  .iconStart {
    * {
      --button-icon-color: var(--icon-primary-inverted);

      width: px-to-rem(var(--button-icon-size));
      height: px-to-rem(var(--button-icon-size));
      fill: var(--icon-primary-inverted);
    }
  }

  &:is(:hover, :focus) {
    transform: scale(1.06);
    transition: transform var(--motion-speed-fast) var(--motion-ease-in);
  }
}

/**
  * Social Link icon only variant
  */
.socialLink {
  --button-padding-block: 0;
  --button-padding-inline: 0;
  --button-icon-size: 30;

  border: none;
  color: var(--icon-secondary-inverted);
}
